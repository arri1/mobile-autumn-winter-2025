# üîê –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ API.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
myFirstAPP/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ api.js              # API —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å backend
‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îî‚îÄ‚îÄ authStore.ts        # Zustand store –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îî‚îÄ‚îÄ Auth/
‚îÇ       ‚îú‚îÄ‚îÄ LoginScreen.tsx      # –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
‚îÇ       ‚îú‚îÄ‚îÄ RegisterScreen.tsx   # –≠–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ ProfileScreen.tsx    # –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è
‚îî‚îÄ‚îÄ app/(tabs)/
    ‚îî‚îÄ‚îÄ Zustand/
        ‚îú‚îÄ‚îÄ index.tsx       # –î–µ–º–æ Zustand —Å auth
        ‚îî‚îÄ‚îÄ styles.ts       # –°—Ç–∏–ª–∏
```

## üöÄ API Endpoints

**Base URL:** `https://cloud.kit-imi.info`

### –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:

1. **Health Check**
   - `GET /api/health`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API

2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
   - `POST /api/auth/register`
   - Body: `{ name, email, password }`

3. **–í—Ö–æ–¥**
   - `POST /api/auth/login`
   - Body: `{ email, password }`

4. **–ü—Ä–æ—Ñ–∏–ª—å**
   - `GET /api/auth/profile`
   - Headers: `Authorization: Bearer {token}`

5. **–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω**
   - `POST /api/auth/refresh`
   - Body: `{ refreshToken }`

6. **–í—ã—Ö–æ–¥**
   - `POST /api/auth/logout`
   - Headers: `Authorization: Bearer {token}`

7. **–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (Admin only)
   - `GET /api/auth/users?page=1&limit=10&role=USER&search=query`
   - Headers: `Authorization: Bearer {token}`

## üíæ Zustand Store (authStore.ts)

### State:
```typescript
{
  user: User | null,           // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  accessToken: string | null,  // JWT —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
  refreshToken: string | null, // –¢–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  isAuthenticated: boolean,    // –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  isLoading: boolean,          // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
  error: string | null,        // –û—à–∏–±–∫–∏
}
```

### Actions:
- `register(userData)` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `login(credentials)` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `logout()` - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `loadUser()` - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
- `clearError()` - –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `getUsers(params)` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:

```tsx
import useAuthStore from '../store/authStore';

function MyComponent() {
  const { user, isAuthenticated, login, logout, isLoading } = useAuthStore();

  const handleLogin = async () => {
    try {
      await login({ email: 'user@example.com', password: '123456' });
      Alert.alert('–£—Å–ø–µ—Ö', '–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!');
    } catch (error) {
      Alert.alert('–û—à–∏–±–∫–∞', error.message);
    }
  };

  return (
    <View>
      {isAuthenticated ? (
        <Text>–ü—Ä–∏–≤–µ—Ç, {user.name}!</Text>
      ) : (
        <Button title="–í–æ–π—Ç–∏" onPress={handleLogin} />
      )}
    </View>
  );
}
```

### 2. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API:

```javascript
import api from './services/api';

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
const response = await api.register({
  name: 'John Doe',
  email: 'john@example.com',
  password: '123456'
});

// –í—Ö–æ–¥
const loginRes = await api.login({
  email: 'john@example.com',
  password: '123456'
});

// –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
const profile = await api.getProfile(accessToken);
```

## üì± –≠–∫—Ä–∞–Ω—ã

### LoginScreen
- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ —Å email –∏ –ø–∞—Ä–æ–ª–µ–º
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ö–Ω–æ–ø–∫–∞ "–î–µ–º–æ –¥–∞–Ω–Ω—ã–µ" –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

### RegisterScreen
- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–∏–º—è, email, –ø–∞—Ä–æ–ª—å, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ö–Ω–æ–ø–∫–∞ "–î–µ–º–æ –¥–∞–Ω–Ω—ã–µ"

### ProfileScreen
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## üîë –î–µ–º–æ –¥–∞–Ω–Ω—ã–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- **Email:** `demo@example.com`
- **Password:** `demo123`

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "zustand": "^4.x.x",
  "axios": "^1.x.x",
  "@react-native-async-storage/async-storage": "^1.x.x"
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install zustand axios @react-native-async-storage/async-storage
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API URL:
–í `services/api.js` –∏–∑–º–µ–Ω–∏—Ç–µ `baseURL` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
```javascript
const API_CONFIG = {
  baseURL: 'https://your-api-url.com',
  // ...
};
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
–í –∫–æ—Ä–Ω–µ–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤—ã–∑–æ–≤–∏—Ç–µ `loadUser()`:
```tsx
import useAuthStore from './store/authStore';

function App() {
  const loadUser = useAuthStore(state => state.loadUser);

  useEffect(() => {
    loadUser(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ AsyncStorage
  }, []);

  // ...
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `AsyncStorage`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
- Interceptors –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∫ –∑–∞–ø—Ä–æ—Å–∞–º
- –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–ª–∏ –æ—à–∏–±–∫–µ 401

## üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (500, 404, –∏ —Ç.–¥.)
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- –ò—Å—Ç–µ–∫—à–∏–µ —Ç–æ–∫–µ–Ω—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ß–∏—Å—Ç—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥

## üìù TODO

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- [ ] Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ (OAuth)
- [ ] –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üÜò –ü–æ–º–æ—â—å

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ /api/health)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: https://cloud.kit-imi.info/api-docs/
